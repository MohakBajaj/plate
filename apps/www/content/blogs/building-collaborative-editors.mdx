---
title: Building Real-time Collaborative Editors with Plate
description: Learn how to implement real-time collaboration in your Plate editor using Yjs and WebRTC for seamless multi-user editing experiences.
date: 2024-12-10
---

Real-time collaboration has become an essential feature for modern text editors. In this guide, we'll explore how to add collaborative editing capabilities to your Plate editor using Yjs and WebRTC.

## Why Collaborative Editing?

Collaborative editing enables multiple users to work on the same document simultaneously, seeing each other's changes in real-time. This is crucial for:

- Team documentation
- Collaborative writing
- Code reviews
- Educational platforms
- Content management systems

## Setting Up Yjs

Yjs is a CRDT (Conflict-free Replicated Data Type) implementation that handles the complex task of merging concurrent edits from multiple users.

First, install the necessary dependencies:

```bash
npm install @platejs/yjs yjs y-websocket y-webrtc
```

## Basic Implementation

Here's how to set up a basic collaborative editor:

```typescript
import { createYjsPlugin } from '@platejs/yjs';
import { WebsocketProvider } from 'y-websocket';
import * as Y from 'yjs';

// Create a new Yjs document
const ydoc = new Y.Doc();

// Set up the WebSocket provider
const provider = new WebsocketProvider(
  'wss://your-websocket-server.com',
  'room-name',
  ydoc
);

// Create the Yjs plugin
const yjsPlugin = createYjsPlugin({
  ydoc,
  provider,
});

// Add it to your Plate editor
const editor = createPlateEditor({
  plugins: [
    // ... other plugins
    yjsPlugin,
  ],
});
```

## User Presence and Cursors

Showing other users' cursors and selections enhances the collaborative experience:

```typescript
import { createCursorOverlayPlugin } from '@platejs/cursor-overlay';

const cursorPlugin = createCursorOverlayPlugin({
  cursors: {
    // User cursor configurations
  },
});
```

## Handling Conflicts

Yjs automatically handles most conflicts, but you can add custom conflict resolution:

```typescript
ydoc.on('update', (update, origin) => {
  // Custom conflict resolution logic
  if (origin !== provider) {
    // Handle local changes
  }
});
```

## WebRTC for Peer-to-Peer

For better performance and privacy, you can use WebRTC for direct peer-to-peer connections:

```typescript
import { WebrtcProvider } from 'y-webrtc';

const webrtcProvider = new WebrtcProvider(
  'room-name',
  ydoc,
  {
    signaling: ['wss://signaling.example.com'],
  }
);
```

## Optimizations

### 1. Lazy Loading
Only sync the visible portion of large documents:

```typescript
const yjsPlugin = createYjsPlugin({
  lazyLoading: true,
  syncThreshold: 1000,
});
```

### 2. Debouncing
Reduce network traffic by debouncing updates:

```typescript
const debouncedSync = debounce(() => {
  provider.sync();
}, 300);
```

### 3. Compression
Enable compression for better bandwidth usage:

```typescript
const provider = new WebsocketProvider(
  'wss://server.com',
  'room',
  ydoc,
  { compress: true }
);
```

## Best Practices

1. **Authentication**: Always authenticate users before allowing collaboration
2. **Permissions**: Implement role-based editing permissions
3. **Backup**: Regularly save document snapshots
4. **Monitoring**: Track collaboration metrics and performance
5. **Offline Support**: Handle offline editing with sync on reconnect

## Example: Complete Setup

Here's a complete example of a collaborative Plate editor:

```typescript
import React from 'react';
import { Plate } from '@platejs/react';
import { createYjsPlugin } from '@platejs/yjs';
import { createCursorOverlayPlugin } from '@platejs/cursor-overlay';
import * as Y from 'yjs';
import { WebsocketProvider } from 'y-websocket';

function CollaborativeEditor() {
  const ydoc = new Y.Doc();
  
  const provider = new WebsocketProvider(
    'wss://collaborate.example.com',
    'document-123',
    ydoc
  );

  const plugins = [
    createYjsPlugin({ ydoc, provider }),
    createCursorOverlayPlugin(),
    // ... other plugins
  ];

  return (
    <Plate plugins={plugins}>
      <PlateContent />
    </Plate>
  );
}
```

## Conclusion

Adding real-time collaboration to your Plate editor opens up new possibilities for your application. With Yjs handling the complex synchronization logic and Plate providing a flexible plugin system, you can build powerful collaborative experiences with minimal effort.

For more advanced features like version history, commenting, and presence indicators, check out our [Plate Pro](https://pro.platejs.org) offering.